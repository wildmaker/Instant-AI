自动化测试程序逻辑流程图（伪代码形式）

开始
  |
  |----> 加载测试用例数据集（JSON/CSV格式）
  |         |
  |         |----> 验证数据集格式是否正确
  |         |         |
  |         |         |----> 若格式错误，抛出异常并终止
  |         |         |
  |         |         |----> 若格式正确，继续
  |
  |----> 初始化结果集（用于存储测试结果）
  |
  |----> 枚举所有测试用例（循环开始）
  |         |
  |         |----> 提取当前用例的输入查询（input_query）
  |         |----> 提取当前用例的预期输出（expected_output）
  |         |----> 提取当前用例的测试ID（test_id）和测试类型（test_type）
  |         |
  |         |----> 构造大Prompt
  |         |         |
  |         |         |----> 将系统预制Prompt与用户输入查询拼接
  |         |         |         |
  |         |         |         |----> 系统预制Prompt示例：
  |         |         |         |         "你是一个智能查询助手，能够根据用户提供的自然语言查询，从表格数据中提取准确信息。以下是表格数据：..."
  |         |         |         |
  |         |         |         |----> 用户输入查询示例：
  |         |         |         |         "YFR-150EX的底阀离地高度是多少？"
  |         |
  |         |----> 调用LLM聊天API
  |         |         |
  |         |         |----> 传入构造的大Prompt
  |         |         |----> 等待LLM响应
  |         |         |         |
  |         |         |         |----> 若API调用失败（如超时、网络错误）
  |         |         |         |         |
  |         |         |         |         |----> 记录错误信息到结果集
  |         |         |         |         |----> 标记当前用例为"失败"
  |         |         |         |         |----> 继续下一个用例
  |         |         |         |
  |         |         |         |----> 若API调用成功
  |         |         |         |         |
  |         |         |         |         |----> 获取LLM的实际输出（actual_output）
  |         |
  |         |----> 比较实际输出与预期输出
  |         |         |
  |         |         |----> 使用文本相似度算法（如Levenshtein距离、余弦相似度）
  |         |         |         |
  |         |         |         |----> 若相似度 > 阈值（如0.9）
  |         |         |         |         |
  |         |         |         |         |----> 标记当前用例为"通过"
  |         |         |         |
  |         |         |         |----> 若相似度 ≤ 阈值
  |         |         |         |         |
  |         |         |         |         |----> 标记当前用例为"失败"
  |         |         |
  |         |         |----> 记录比较结果到结果集
  |         |         |         |
  |         |         |         |----> 记录字段包括：
  |         |         |         |         test_id, input_query, expected_output, actual_output, 
  |         |         |         |         test_type, status（通过/失败）, similarity_score, remark
  |         |
  |         |----> 继续下一个用例（循环结束）
  |
  |----> 所有用例测试完成
  |         |
  |         |----> 统计测试结果
  |         |         |
  |         |         |----> 计算通过率、失败率
  |         |         |----> 按测试类型分类统计（如正常用例、边界用例）
  |         |
  |         |----> 将结果集导出为CSV文件
  |         |         |
  |         |         |----> CSV文件字段包括：
  |         |         |         test_id, input_query, expected_output, actual_output, 
  |         |         |         test_type, status, similarity_score, remark
  |         |
  |         |----> 输出测试报告（可选：HTML格式）
  |
结束